{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst btnElem = document.querySelector(\"[data-start]\");\nconst inputElem = document.querySelector(\"#datetime-picker\");\nconst daysElem = document.querySelector(\"[data-days]\");\nconst hoursElem = document.querySelector(\"[data-hours]\");\nconst minutesElem = document.querySelector(\"[data-minutes]\");\nconst secondsElem = document.querySelector(\"[data-seconds]\");\nlet userSelectedDate = null;\nlet timerIsActive = false;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0].getTime();\n      \n    if (userSelectedDate < Date.now()) {\n        iziToast.show({\n            message: 'Please choose a date in the future',\n            color: 'red',\n            position: 'topRight'\n        });\n        btnElem.disabled = true;\n    } else {\n        btnElem.disabled = false;\n    }\n  },\n};\n\nflatpickr(inputElem, options);\n\nbtnElem.addEventListener(\"click\", setTimer);\n\nfunction setTimer() {\n    if (timerIsActive) return;\n\n    timerIsActive = true;\n    inputElem.disabled = true;\n    btnElem.disabled = true;\n\n    const intervalId = setInterval(() => {\n        const timeLeft = convertMs(userSelectedDate - Date.now());\n        const { days, hours, minutes, seconds } = timeLeft;\n\n        startTimer({ days, hours, minutes, seconds });\n    }, 1000);\n\n    setTimeout(() => {\n        clearInterval(intervalId);\n        timerIsActive = false;\n        inputElem.disabled = false;\n    }, userSelectedDate - Date.now());\n}\n\nfunction startTimer({ days, hours, minutes, seconds }) {\n    daysElem.textContent = days;\n    hoursElem.textContent = hours;\n    minutesElem.textContent = minutes;\n    secondsElem.textContent = seconds;\n}\n\nfunction addLeadingZero(value) {\n    return `${value}`.padStart(2, \"0\");\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = addLeadingZero(Math.floor(ms / day));\n  // Remaining hours\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}"],"names":["btnElem","inputElem","daysElem","hoursElem","minutesElem","secondsElem","userSelectedDate","timerIsActive","options","selectedDates","iziToast","flatpickr","setTimer","intervalId","timeLeft","convertMs","days","hours","minutes","seconds","startTimer","addLeadingZero","value","ms"],"mappings":"2FAKA,MAAMA,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAmB,KACnBC,EAAgB,GAEpB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAAE,QAAO,EAEvCH,EAAmB,KAAK,OACxBI,EAAS,KAAK,CACV,QAAS,qCACT,MAAO,MACP,SAAU,UACtB,CAAS,EACDV,EAAQ,SAAW,IAEnBA,EAAQ,SAAW,EAExB,CACH,EAEAW,EAAUV,EAAWO,CAAO,EAE5BR,EAAQ,iBAAiB,QAASY,CAAQ,EAE1C,SAASA,GAAW,CAChB,GAAIL,EAAe,OAEnBA,EAAgB,GAChBN,EAAU,SAAW,GACrBD,EAAQ,SAAW,GAEnB,MAAMa,EAAa,YAAY,IAAM,CACjC,MAAMC,EAAWC,EAAUT,EAAmB,KAAK,IAAK,CAAA,EAClD,CAAE,KAAAU,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAKL,EAE1CM,EAAW,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CAC/C,EAAE,GAAI,EAEP,WAAW,IAAM,CACb,cAAcN,CAAU,EACxBN,EAAgB,GAChBN,EAAU,SAAW,EACxB,EAAEK,EAAmB,KAAK,IAAG,CAAE,CACpC,CAEA,SAASc,EAAW,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACnDjB,EAAS,YAAcc,EACvBb,EAAU,YAAcc,EACxBb,EAAY,YAAcc,EAC1Bb,EAAY,YAAcc,CAC9B,CAEA,SAASE,EAAeC,EAAO,CAC3B,MAAO,GAAGA,CAAK,GAAG,SAAS,EAAG,GAAG,CACrC,CAEA,SAASP,EAAUQ,EAAI,CAQrB,MAAMP,EAAOK,EAAe,KAAK,MAAME,EAAK,KAAG,CAAC,EAE1CN,EAAQI,EAAe,KAAK,MAAOE,EAAK,MAAO,IAAI,CAAC,EAEpDL,EAAUG,EAAe,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEjEJ,EAAUE,EAAe,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAElF,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}